!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mulin=e():t.mulin=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(3),o=(r=i)&&r.__esModule?r:{default:r};var a=Math.PI/180,s=y(),u=!1;u=!1;var l=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],h=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],c={x:0,y:0,z:0};function f(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=function(t,e,n){var r,i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=1-t,s=0,u=n[0];2===e&&(u=[u[0],u[1],c],r=a,i=t),3===e&&(r=a*a,i=a*t*2,s=t*t);var l={x:r*u[0].x+i*u[1].x+s*u[2].x,y:r*u[0].y+i*u[1].y+s*u[2].y};return o&&(l.z=r*u[0].z+i*u[1].z+s*u[2].z),l}(t,e,n),i=r.x*r.x+r.y*r.y;return Math.sqrt(i)}function y(){return window?window.devicePixelRatio:wx.getSystemInfoSync().pixelRatio}function p(t){return 3==t.length?[Math.floor(255*t[0]),Math.floor(255*t[1]),Math.floor(255*t[2])]:4==t.length?[Math.floor(255*t[0]),Math.floor(255*t[1]),Math.floor(255*t[2]),t[3]]:void 0}e.default={PI_DIV_180:a,DRP:s,isWX:u,createColorStops:function(t,e){for(var n=[],r=0;r<5*e;r+=5){var i=new o.default(p([t[r],t[r+1],t[r+2],t[r+3]]));n.push([t[r+4],i])}return n},bezierLength:function(t,e,n,r){var i,o,a=0,s=l.length,u=2,c=void 0;null!=r?(u=3,c=[t,e,n,r]):c=[t,e,n];var y=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=t,i=r.length,o=i-1;i>1;i--,o--){for(var a,s=[],u=0;u<o;u++)a={x:o*(r[u+1].x-r[u].x),y:o*(r[u+1].y-r[u].y)},e&&(a.z=o*(r[u+1].z-r[u].z)),s.push(a);n.push(s),r=s}return n}(c);for(i=0;i<s;i++)o=.5*l[i]+.5,a+=h[i]*f(o,u,y);return.5*a},converColorArray:p,isPointInPolygon:function(t,e,n){if(null==t||null==e||null==n)return!1;if(n.length<3)return!1;for(var r=n[0][0],i=n[0][0],o=n[0][1],a=n[0][1],s=1;s<n.length;s++){var u=n[s];r=Math.min(u[0],r),i=Math.max(u[0],i),o=Math.min(u[1],o),a=Math.max(u[1],a)}if(t<r||t>i||e<o||e>a)return!1;for(var l=!1,h=0,c=n.length-1;h<n.length;c=h++)n[h][1]>e!=n[c][1]>e&&t<(n[c][0]-n[h][0])*(e-n[h][1])/(n[c][1]-n[h][1])+n[h][0]&&(l=!l);return l},pixelRatio:y,requestAnimationFrame:function(t,e){return window?window.requestAnimationFrame(e):t.requestAnimationFrame(e)},cancelAnimationFrame:function(t,e){window?window.cancelAnimationFrame(e):t.cancelAnimationFrame(e)},createPath2D:function(t,e){if(u)return null;if(window)return new Path2D(e);var n=t.createPath2D(e);return n&&null==n.closePath?null:n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(5)),o=s(n(0)),a=s(n(6));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorX:.5,anchorY:.5};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"centerMe",value:function(t){null==t&&(t=this._parent),null!=t&&(this.x=Math.floor((t.width-this.width)/2),this.y=Math.floor((t.height-this.height)/2))}},{key:"canDraw",value:function(){return 0!=this.width&&0!=this.height&&function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canDraw",this).call(this)}},{key:"getRoot",value:function(){for(var t=this;null!=t._parent;)t=t._parent;return t}},{key:"pointInMe",value:function(t,e,n){if(null==t||null==e)return null;var r=this._calculateTransformMatrix(),a=i.default.IdentityMatrix();null!=n?(i.default.copyFrom(n,a),a.multiply(r)):i.default.copyFrom(r,a);for(var s=this.getVertex(),u=0;u<s.length;u++)a.multiplyWithVertex(s[u],s[u]);if(!o.default.isPointInPolygon(t,e,s))return null;for(var l=this,h=this._children.length-1;h>=0;h--){var c=this._children[h].pointInMe(t,e,a);if(null!=c){l=c;break}}return l}},{key:"getVertex",value:function(){return[[0,0],[this.width,0],[this.width,this.height],[0,this.height]]}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(6)),o=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.fillStyles=[],n.strokeStyles=[],n._path2d,n._paths=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"getShapePath",value:function(t){return this.isDirty()&&(this._path2d=o.default.createPath2D(t.wx_canvas),null!=this._path2d&&this.createSubPath2D(t),this.saveDirty()),this._path2d}},{key:"addFillStyle",value:function(t){this.fillStyles.push(t)}},{key:"addStrokeStyle",value:function(t){this.strokeStyles.push(t)}},{key:"getShapeLength",value:function(){var t=0;return this._paths.forEach(function(e){t+=e.length}),t}},{key:"isDirty",value:function(){for(var t=0;t<this._paths.length;t++){if(this._paths[t].isDirty())return!0}return!1}},{key:"saveDirty",value:function(){for(var t=0;t<this._paths.length;t++){this._paths[t].saveDirty()}}},{key:"addPath",value:function(t){-1==this._paths.indexOf(t)&&this._paths.push(t)}},{key:"removePathAt",value:function(t){t<0||t>this._paths.length-1||this._paths.splice(t,1)}},{key:"removePath",value:function(t){this.removePathAt(this._paths.indexOf(t))}},{key:"canDraw",value:function(){return(0!=this.fillStyles.length||0!=this.strokeStyles.length)&&0!=this._paths.length&&function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canDraw",this).call(this)}},{key:"drawPaths",value:function(t,e,n){this._paths.forEach(function(e){t.save();var n=e.getTransformMatrix();if(!n.isIdentity()){var r=n.data;t.transform(r[0],r[3],r[1],r[4],r[2],r[5])}e.createPath(t,e.width,e.height),t.restore()})}},{key:"drawSelf",value:function(t,e,n){var r=this;if(null==this.getShapePath(t)&&(t.beginPath(),this.drawPaths(t,e,n)),this.fillStyles.forEach(function(e){e.paint(t,r._path2d)}),this.strokeStyles.length>0){var i=this.getShapeLength();this.strokeStyles.forEach(function(e){e.paint(t,r._path2d,i)})}}},{key:"createSubPath2D",value:function(t){var e=this;this._paths.forEach(function(n){var r=n.getTransformMatrix();r.isIdentity()?e._path2d.addPath(n.getPath2D(t)):e._path2d.addPath(n.getPath2D(t),r.toSVGMatrix())})}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._color,3==e.length&&(this._color=["rgba(",e[0],",",e[1],",",e[2],",",1,")"]),4==e.length&&(this._color=["rgba(",e[0],",",e[1],",",e[2],",",e[3],")"]),this._colorString}return r(t,[{key:"_converColorValue",value:function(t){return t>=0&&t<=1?Math.floor(255*t):t}},{key:"setColor",value:function(t,e,n){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],n&&(this.a=t[e+3]),null==this._colorString}},{key:"color",set:function(t){t instanceof Array&&this.setColor(t,0,4==t.length)},get:function(){if(null==this._colorString)if(1==this._color[7]){var t=this._color[1].toString(16);1==t.length&&(t="0"+t);var e=this._color[3].toString(16);1==e.length&&(e="0"+e);var n=this._color[5].toString(16);1==n.length&&(n="0"+n),this._colorString="#"+t+e+n}else this._colorString=this._color.join("");return this._colorString}},{key:"r",get:function(){return this._color[1]},set:function(t){(t=this._converColorValue(t))!=this._color[1]&&(this._color[1]=t,this._colorString=null)}},{key:"g",set:function(t){(t=this._converColorValue(t))!=this._color[3]&&(this._color[3]=t,this._colorString=null)},get:function(){return this._color[3]}},{key:"b",set:function(t){(t=this._converColorValue(t))!=this._color[5]&&(this._color[5]=t,this._colorString=null)},get:function(){return this._color[5]}},{key:"a",set:function(t){t!=this._color[7]&&(this._color[7]=t,this._colorString=null)},get:function(){return this._color[7]}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r,i){var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,r,i)}else if("value"in o&&o.writable)o.value=r;else{var s=o.set;void 0!==s&&s.call(i,r)}return r},o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=u(n(0)),s=u(n(7));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._points=[],n._path,n._isClose=t.isClose,null==n._isClose&&(n._isClose=!1),n._dirty=!1,0!=n._points.length&&(n._dirty=!0),n._path2d,n._dirtyPoints=[],n._length=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"addPoint",value:function(t){if(t._parent!=this){if(null!=t._parent)throw"该点已经添加到其他线上，请先用它之前线删除它";this._points.push(t),t._parent=this,this.fireDirty()}}},{key:"removePointAt",value:function(t){if(!(t<0||t>this._points.length-1)){var e=this._points[t];e._parent=null,this._points.splice(t,1);var n=this._dirtyPoints.indexOf(e);-1!=n&&this._dirtyPoints.splice(n,1),this.fireDirty()}}},{key:"removePoint",value:function(t){this.removePointAt(this._points.indexOf(t))}},{key:"isDirty",value:function(){return this._dirty||0!=this._dirtyPoints.length}},{key:"fireDirty",value:function(){this._dirty=!0,this._length=null}},{key:"firePointDirty",value:function(t){-1==this._dirtyPoints.indexOf(t)&&(this._dirtyPoints.push(t),this.fireDirty())}},{key:"saveDirty",value:function(){this._dirty=!1,this._dirtyPoints.forEach(function(t){t.saveDirty()}),this._dirtyPoints.length=0}},{key:"getPath2D",value:function(t){return this.isDirty()&&(this._path2d=a.default.createPath2D(t.wx_canvas),this._path2d&&null==this._path2d.closePath&&(this._path2d=null),null!=this._path2d&&this.createPath(this._path2d,this.width,this.height)),this._path2d}},{key:"createPath",value:function(t,e,n){if(!(this._points.length<=1)){var r=this._points[0],i=r,o=void 0;if(null!=r){t.moveTo(r.x,r.y);for(var a=1;a<this._points.length;a++)o=this._points[a],this._lineToNext(i,o,t),i=o;this._isClose&&(o=r,this._lineToNext(i,o,t)),this.saveDirty()}}}},{key:"_lineToNext",value:function(t,e,n){var r=t.out,i=e.in;if(0!=t.type||0!=e.type)if(null==r&&null==i)n.lineTo(e.x,e.y);else{var o=r,a=i;if(null==o||null==a){var s=o;s=s||a,n.quadraticCurveTo(s[0],s[1],e.x,e.y)}else n.bezierCurveTo(o[0],o[1],a[0],a[1],e.x,e.y)}else n.lineTo(e.x,e.y)}},{key:"calculatePathLength",value:function(){for(var t=0,e=void 0,n=void 0,r=0;r<this._points.length-1;r++)e=this._points[r],n=this._points[r+1],t+=this._calculateSegmentLength(e,n);return this.isClose&&(e=n,n=this._points[0],t+=this._calculateSegmentLength(e,n)),t}},{key:"_calculateSegmentLength",value:function(t,e){var n=t.out,r=e.in;if(null==n&&null==r){var i=e.x-t.x,o=e.y-t.y;return Math.sqrt(i*i+o*o)}var s=n,u=r;if(null==s||null==u){var l=s;return l=l||u,a.default.bezierLength(t,{x:l[0],y:l[1]},e)}return a.default.bezierLength(t,{x:s[0],y:s[1]},{x:u[0],y:u[1]},e)}},{key:"width",get:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"width",this)},set:function(t){this.width!=t&&(i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"width",t,this),this.fireDirty())}},{key:"height",get:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"height",this)},set:function(t){this.height!=t&&(i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"height",t,this),this.fireDirty())}},{key:"length",get:function(){return null==this._length&&(this._length=this.calculatePathLength()),this._length}},{key:"isClose",get:function(){return this._isClose},set:function(t){this._isClose!=t&&(this._isClose=t,this._dirty=!0,this._length=null)}},{key:"pathVertices",set:function(t){for(var e=0,n=0;e<this._points.length;e++){var r=this._points[e];r.setVertices(t,n),0==r.type?n+=3:n+=6}}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=null,o=null,a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Float32Array(6);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._array=e,this.identity()}return r(t,[{key:"isIdentity",value:function(){var t=this._array;return 1==t[0]&&0==t[1]&&0==t[2]&&0==t[3]&&1==t[4]&&0==t[5]}},{key:"clone",value:function(){for(var e=new t,n=this.data,r=e.data,i=0;i<n.length;i++)r[i]=n[i];return e}},{key:"from",value:function(t){for(var e=this.data,n=t.data,r=0;r<e.length;r++)e[r]=n[r]}},{key:"identity",value:function(){var t=this._array;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.multiplyWithDatas(e,n,-n,e,0,0),this}},{key:"scale",value:function(t,e){return this.multiplyWithDatas(t,0,0,e,0,0),this}},{key:"translate",value:function(t,e){return this.multiplyWithDatas(1,0,0,1,t,e),this}},{key:"multiplyWithVertexDatas",value:function(t,e,n){null==n&&(n=new Float32Array(2));var r=this.data;return n[0]=r[0]*t+r[1]*e+r[2],n[1]=r[3]*t+r[4]*e+r[5],n}},{key:"multiplyWithVertex",value:function(t,e){return this.multiplyWithVertexDatas(t[0],t[1],e)}},{key:"multiplyWithDatas",value:function(t,e,n,r,i,o){var a=this.data,s=this.data,u=a[0],l=a[3],h=a[1],c=a[4],f=a[2],y=a[5];return s[0]=t*u+e*h,s[3]=t*l+e*c,s[1]=n*u+r*h,s[4]=n*l+r*c,s[2]=i*u+o*h+f,s[5]=i*l+o*c+y,this}},{key:"multiply",value:function(t){var e=t.data;return this.multiplyWithDatas(e[0],e[3],e[1],e[4],e[2],e[5])}},{key:"toSVGMatrix",value:function(){var t=this.data;return{a:t[0],b:t[3],c:t[1],d:t[4],e:t[2],f:t[5]}}},{key:"data",get:function(){return this._array}}],[{key:"copyFrom",value:function(t,e){var n=e.data,r=t.data;n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5]}},{key:"IdentityMatrix",value:function(e){return null==e&&(e=new Float32Array(6)),new t(e).identity()}},{key:"TEMP",get:function(){return null==i&&(i=new t).identity(),i}},{key:"TEMP2",get:function(){return null==o&&(o=new t,i.identity()),o}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=o(n(7));o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.drawOrder=t.drawOrder,n.name=t.name,n.id=t.id,n.blendMode=t.blendMode||"source-over",n._visible=t.visible,null==n._visible&&(n.visible=!0),n.clips=t.clips,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"addClip",value:function(t,e){null==this.clips&&(this.clips=[]),this.clips.push({shape:t,intersect:e})}},{key:"canDraw",value:function(){return 0!=this.opacity&&this.visible&&0!=this.scaleX&&0!=this.scaleY}},{key:"applyDrawingStates",value:function(t){t.globalAlpha=this.opacity,t.globalCompositeOperation=this.blendMode}},{key:"getClipRegion",value:function(){var t=void 0;return this.clips&&(t=this.clips[this.clips.length-1]),t||(this._parent&&(t=this._parent.getClipRegion()),t)}},{key:"_clipRegion",value:function(t,e){var n=e.intersect,r=e.shape;if(null!=r.drawPaths){var i=r.getShapePath(t),o=r.getWorldTransformMatrix();return null!=o&&(i?(t.setTransform(o.toSVGMatrix()),n?t.clip(i):t.clip(i,"evenodd")):(t.beginPath(),t.setTransform(o.toSVGMatrix()),r.drawPaths(t,r.width,r.height),t.closePath(),n?t.clip():t.clip("evenodd")),!0)}}},{key:"clip",value:function(t){var e=this.getClipRegion(),n=t.lastClipRegion;if(null==e&&null==n)return!0;if(null!=e&&null!=n)return e.shape==n.shape&&e.intersect==n.intersect||(t.restore(),t.save(),t.lastClipRegion=e,this._clipRegion(t,e));if(null==e||null==n){var r=e;return r=r||n,t.lastClipRegion=r,t.restore(),t.save(),this._clipRegion(t,r)}return!1}},{key:"draw",value:function(t){if(this.canDraw()&&("star_fall_1"==this.name&&console.log(),this.clip(t))){var e=t.lastClipRegion;this.applyCurrentTransform(t)&&(t.save(),this.applyDrawingStates(t),this.drawSelf(t,this.width,this.height),t.restore(),this.drawChildren(t)),t.lastClipRegion=e}}},{key:"drawChildren",value:function(t){this._children.forEach(function(e){e.draw(t)})}},{key:"applyCurrentTransform",value:function(t){var e=this.getWorldTransformMatrix();if(null==e)return!1;var n=e.data;return t.setTransform(n[0],n[3],n[1],n[4],n[2],n[5]),!0}},{key:"drawSelf",value:function(t,e,n){}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=t}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(5),a=(r=o)&&r.__esModule?r:{default:r};Math.PI;var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=e.x,null==this._x&&(this._x=0),this._y=e.y,null==this._y&&(this._y=0),this._scaleX=e.scaleX,null==this._scaleX&&(this._scaleX=1),this._scaleY=e.scaleY,null==this._scaleY&&(this._scaleY=1),this._anchorX=e.anchorX,null==this._anchorX&&(this._anchorX=0),this._anchorY=e.anchorY,null==this._anchorY&&(this._anchorY=0),this._rotation=e.rotation,null==this._rotation&&(this._rotation=0),this._width=e.width,null==this._width&&(this._width=0),this._height=e.height,null==this._height&&(this._height=0),this._matrix=new a.default,this._worldMatrix=new a.default,this._parent,this._children=[],this._worldTransformDirty=!0,this._transformDirty=!0,this._opacity=e.opacity,null==this._opacity&&(this._opacity=1),this._opacityChange=!0}return i(t,[{key:"isWorldTransformDirty",value:function(){return this._worldTransformDirty}},{key:"isTransformDirty",value:function(){return this._transformDirty}},{key:"fireTransformDirty",value:function(){this._transformDirty=!0,this.fireWorldTransformDirty()}},{key:"saveTransform",value:function(){this._transformDirty=!1}},{key:"fireWorldTransformDirty",value:function(){this._worldTransformDirty=!0,this._children.forEach(function(t){t.fireWorldTransformDirty()})}},{key:"saveWorldTransform",value:function(){this._worldTransformDirty=!1}},{key:"forEachChild",value:function(t){this._children.forEach(function(e){t(e)})}},{key:"addChild",value:function(t){if(null!=t.parent)throw new Error("子节点不能同时挂在多个父节点下,请先将该子节点从原父节点移除后再添加");this._children.push(t),t.parent=this,t.fireWorldTransformDirty()}},{key:"removeChild",value:function(t){this.removeChildAt(this._children.indexOf(t))}},{key:"removeChildAt",value:function(t){if(!(t<0||t>this._children.length-1)){var e=this._children.splice(t,1);null!=e&&1==e.length&&(e[0].parent=null,e[0].fireWorldTransformDirty())}}},{key:"getTransformMatrix",value:function(){if(0==this.scaleX||0==this.scaleY)return null;var t=this._matrix;if(this.isTransformDirty()){t.identity(),t=t.translate(this.x,this.y);var e=this.anchorX*this.width,n=this.anchorY*this.height;0!==this.rotation&&t.translate(e,n).rotate(this.rotation).translate(-e,-n),1===this.scaleX&&1===this.scaleY||t.scale(this.scaleX,this.scaleY).translate(e/this.scaleX-e,n/this.scaleY-n),this.saveTransform()}return t}},{key:"getWorldTransformMatrix",value:function(){if(0==this.scaleX||0==this.scaleY)return null;if(this.isWorldTransformDirty()){if(this.parent){var t=this.getTransformMatrix();if(null==t)return null;var e=this.parent.getWorldTransformMatrix();if(null==e)return null;e.isIdentity()?this._worldMatrix.from(t):(this._worldMatrix.from(e),t.isIdentity()||this._worldMatrix.multiply(t))}else this._worldMatrix.from(this.getTransformMatrix());this.saveWorldTransform()}return this._worldMatrix}},{key:"opacity",get:function(){return this._opacityChange&&(this._parent&&(this._opacity*=this._parent.opacity),this._opacityChange=!1),this._opacity},set:function(t){this._opacity!=t&&(this._children.forEach(function(t){t._opacityChange=!0}),this._opacity=t)}},{key:"children",get:function(){return this._children}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}},{key:"width",get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this.fireTransformDirty())}},{key:"height",get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this.fireTransformDirty())}},{key:"scaleX",get:function(){return this._scaleX},set:function(t){this._scaleX!=t&&(this._scaleX=t,this.fireTransformDirty())}},{key:"scaleY",get:function(){return this._scaleY},set:function(t){this._scaleY!=t&&(this._scaleY=t,this.fireTransformDirty())}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this.fireTransformDirty())}},{key:"anchor",get:function(){return[this._anchorX,this._anchorY]}},{key:"anchorX",set:function(t){this._anchorX!=t&&(this._anchorX=t,this.fireTransformDirty())},get:function(){return this._anchorX}},{key:"anchorY",set:function(t){this._anchorY!=t&&(this._anchorY=t,this.fireTransformDirty())},get:function(){return this._anchorY}},{key:"x",get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.fireTransformDirty())}},{key:"y",get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.fireTransformDirty())}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),a=(r=o)&&r.__esModule?r:{default:r};var s=-Math.PI/2,u=1.5*Math.PI,l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorX:0,anchorY:0};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._dirty=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"createPath",value:function(t,e,n){t.moveTo(0,-e/2),e==n?t.arc(0,0,e/2,s,u):t.ellipse(0,0,e/2,n/2,0,s,u),t.closePath()}},{key:"calculatePathLength",value:function(){if(this.width==this.height)return Math.PI*this.width;var t=this.width/2,e=this.height/2;return 2*Math.PI*Math.min(t,e)+4*Math.abs(t-e)}},{key:"isClose",get:function(){return!0}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),a=(r=o)&&r.__esModule?r:{default:r};var s=Math.PI/2,u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorX:.5,anchorY:.5};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),null==t.anchorX&&(t.anchorX=.5),null==t.anchorY&&(t.anchorY=.5);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._dirty=!0,n._radius=t.radius,null==n._radius&&(n._radius=0),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"createPath",value:function(t,e,n){if(0==this.radius)t.rect(-e/2,-n/2,e,n),t.closePath();else{var r=Math.min(e,n),i=this.radius;i>r/2&&(i=r/2);var o=-e/2,a=-n/2,u=o+e,l=a+n;t.moveTo(o+i,a),t.lineTo(u-i,a),t.arc(u-i,a+i,i,-s,0),t.lineTo(u,l-i),t.arc(u-i,l-i,i,0,s),t.lineTo(o+i,l),t.arc(o+i,l-i,i,s,Math.PI),t.lineTo(o,a+i),t.arc(o+i,a+i,i,Math.PI,Math.PI+s),t.closePath()}}},{key:"calculatePathLength",value:function(){if(0==this.radius)return 2*(this.width+this.height);var t=2*(this.width+this.height),e=Math.min(this.width,this.height),n=this.radius;return n>e/2&&(n=e/2),t-=8*n,t+=2*Math.PI*n}},{key:"isClose",get:function(){return!0}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius!=t&&(this._radius=t,this.fireDirty())}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null==e.x)throw"x不能为空";if(null==e.y)throw"y不能为空";this._x=e.x,this._y=e.y,this.type=e.type,this._in=e.in,this._out=e.out,this._radius=e.radius,this._dirty=!1,this._parent}return r(t,[{key:"setVertices",value:function(t,e){if(0===this.type)return this.x=t[e],this.y=t[e+1],void(this.radius=t[e+2]);this.x=t[e],this.y=t[e+1],this.setInX(t[e+2]),this.setInY(t[e+3]),this.setOutX(t[e+4]),this.setOutY(t[e+5])}},{key:"setInX",value:function(t){null==this.in&&(this._in=[0,0]),this.in[0]!=t&&(this.in[0]=t,this.fireDirty())}},{key:"setInY",value:function(t){null==this.in&&(this._in=[0,0]),this.in[1]!=t&&(this.in[1]=t,this.fireDirty())}},{key:"setOutX",value:function(t){null==this.out&&(this._out=[0,0]),this.out[0]!=t&&(this.out[0]=t,this.fireDirty())}},{key:"setOutY",value:function(t){null==this.out&&(this._out=[0,0]),this.out[1]!=t&&(this.out[1]=t,this.fireDirty())}},{key:"fireDirty",value:function(){this._parent&&(this._dirty=!0,this._parent.firePointDirty(this))}},{key:"saveDirty",value:function(){this._dirty=!1}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius!=t&&(this._radius=t,this.fireDirty())}},{key:"vertices",set:function(t){t instanceof Array&&this.setVertices(t,0)}},{key:"dirty",get:function(){return this._dirty}},{key:"x",get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.fireDirty())}},{key:"y",get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.fireDirty())}},{key:"in",get:function(){return this._in}},{key:"out",get:function(){return this._out}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(3)),o=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._colorStops,this._gradient,this.values=e}return r(t,[{key:"_createGradient",value:function(t){}},{key:"getGradient",value:function(t){var e=this;return null==this._gradient&&(this._gradient=this._createGradient(t),this._colorStops.forEach(function(t){e._gradient.addColorStop(t[0],t[1].color)})),this._gradient}},{key:"addColorStop",value:function(t,e){null==this._colorStops&&(this._colorStops=[]),this._colorStops.push([t,e]),this._gradient=null}},{key:"setColorStop",value:function(t,e,n){var r=this._colorStops[t];r&&(r[0]=e,r[1]=n,this._gradient=null)}},{key:"colorStopValuesOffset",get:function(){return 4}},{key:"coordOffset",get:function(){return 0}},{key:"start",set:function(t){if(t instanceof Array){var e=this.coordOffset;this._values[e]==t[0]&&this._values[e+1]==t[1]||(this._values[e]=t[0],this._values[e+1]=t[1],this._gradient=null)}}},{key:"end",set:function(t){if(t instanceof Array){var e=this.coordOffset;this._values[e+2]==t[0]&&this._values[e+3]==t[1]||(this._values[e+2]=t[0],this._values[e+3]=t[1],this._gradient=null)}}},{key:"values",set:function(t){if(t instanceof Array){var e=this.colorStopValuesOffset;if((t.length-e)%5==0){null==this._values&&(this._values=t);var n=this._values,r=this.coordOffset;if(t[r]!=n[r]||t[r+1]!=n[1+r]||t[r+2]!=n[2+r]||t[r+3]!=n[3+r]){for(var a=0;a<4;a++)n[a+r]=t[a+r];this._gradient=null}for(var s=Math.floor((t.length-e)/5),u=0;u<s;u++){var l=5*u+e;null==this._colorStops&&(this._colorStops=new Array(s));var h=this._colorStops[u];if(h){var c=h[0],f=h[1];t[l];f.setColor(t,l,!0)&&(this._gradient=null),t[l+4]!=c&&(h[0]=c,this._gradient=null)}else this._colorStops[u]=new Array(2),this._colorStops[u][0]=t[l+4],this._colorStops[u][1]=new i.default(o.default.converColorArray([t[l],t[l+1],t[l+2],t[l+3]]))}}else console.warn("gradient颜色的array数据结构不正确")}},get:function(){return this._values}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),a=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.id=e.id,this._color,null!=e.color&&(this._color=new a.default(e.color)),this.gradientColor=e.gradientColor,this.opacity=e.opacity,null==this.opacity&&(this.opacity=1)}return i(t,[{key:"canDraw",value:function(){return(null!=this.color||null!=this.gradientColor)&&0!=this.opacity}},{key:"_applyStyle",value:function(t){t.globalAlpha*=this.opacity}},{key:"paint",value:function(t,e){this.canDraw()&&(t.save(),this._applyStyle(t),this._paintStyle(t,e),t.restore())}},{key:"_paintStyle",value:function(t,e){}},{key:"color",get:function(){return this._color},set:function(t){if(t instanceof a.default)this._color=t;else if(t instanceof Array){if(null==this._color)return void(this._color=new a.default(t));this._color.color=t}}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=p(n(14)),o=p(n(1)),a=p(n(15)),s=p(n(16)),u=p(n(2)),l=p(n(17)),h=p(n(5)),c=p(n(18)),f=p(n(19)),y=p(n(20));function p(t){return t&&t.__esModule?t:{default:t}}var d={};!function t(e,n){var i=function(i){var o=e[i],a=o;"object"==(void 0===a?"undefined":r(a))&&t(o,a={}),Object.defineProperty(n,i,{get:function(){return a}})};for(var o in e)i(o)}({version:"0.0.1.202006040451",Graph:i.default,Figure:o.default,Render:f.default,FlareJSONReader:y.default,shapes:{Circle:a.default,Polygon:s.default,Shape:u.default,Rectangle:l.default},math:{Matrix3:h.default},text:{Text:c.default}},d);console.log("%c Mulin(version 0.0.1.202006040451) by 老脸","color:red;background-color:yellow"),e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(1),o=(r=i)&&r.__esModule?r:{default:r};var a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(2)),o=a(n(8));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._circlePath=new o.default,n._radius=null==t.radius?0:t.radius,n._circlePath.width=2*n._radius,n._circlePath.height=n._circlePath.width,n._angle=null==t.angle?360:t.angle,n._center,n.addPath(n._circlePath),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"canDraw",value:function(){return function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canDraw",this).call(this)&&0!=this.radius}},{key:"width",set:function(t){},get:function(){return 2*this.radius}},{key:"height",set:function(t){},get:function(){return 2*this.radius}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle!=t&&(this._angle=t,Math.abs(this._angle)>=360&&(this._angle<0?this._angle=-360:this._angle=360))}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius!=t&&(this._radius=t,this._circlePath.width=2*t,this._circlePath.height=2*t)}},{key:"center",get:function(){return this._center||(this._center={x:0,y:0}),this._center.x=this.x+this._radius,this._center.y=this.y+this._radius,this._center}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._close=null==t.close||t.close,n._points=t.points||[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"addPoint",value:function(t){this._points.push(t),this._contentDirty=!0}},{key:"removePointAt",value:function(t){this._points.splice(t,1),this._contentDirty=!0}},{key:"canDraw",value:function(){return this._points.length>=3&&function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canDraw",this).call(this)}},{key:"_createShapePath",value:function(t,e,n){t.beginPath();var r=this._points;t.moveTo(r[0][0],r[0][1]);for(var i=1;i<r.length;i++){var o=r[i];t.lineTo(o[0],o[1])}this.close&&t.closePath()}},{key:"points",get:function(){return this._points}},{key:"close",get:function(){return this._close},set:function(t){this._close!=t&&(this._close=t,this._contentDirty=!0)}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r,i){var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,r,i)}else if("value"in o&&o.writable)o.value=r;else{var s=o.set;void 0!==s&&s.call(i,r)}return r},o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=u(n(2)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=null==t.radius?0:t.radius;return n._rectanglePath=new s.default({anchorX:.5,anchorY:.5,radius:r,width:n.width,height:n.height}),n.addPath(n._rectanglePath),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"canDraw",value:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canDraw",this).call(this)&&0!=this.width&&0!=this.height}},{key:"width",get:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"width",this)},set:function(t){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"width",t,this),this._rectanglePath.width=t}},{key:"height",get:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"height",this)},set:function(t){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"height",t,this),this._rectanglePath.height=t}},{key:"radius",get:function(){return this._rectanglePath.radius},set:function(t){this._rectanglePath.radius!=t&&(this._rectanglePath.radius=t)}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=n(1),s=(r=a)&&r.__esModule?r:{default:r};var u="left",l="top",h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._text=t.text,n._fontFamily=t.fontFamily||"arial",n._fontSize=null==t.fontSize?16:t.fontSize,n._fontWeight=t.fontWeight||"normal",n._fontStyle=t.fontStyle||"",n.maxWidth=t.maxWidth,n._color=t.color||"#0e0e0e",n._borderColor=t.borderColor,n._borderWidth=null==t.borderWidth?0:t.borderWidth,n._width=0,n.align=t.align||u,n.baseLine=t.baseLine||l,n.lineHeight=null==t.lineHeight?1.5:t.lineHeight,n._textArray=[],n._textDirty=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"getVertex",value:function(){var t=0,e=0,n=this.width,r=this.height;return"center"==this.align&&(t=-n/2),"right"==this.align&&(t=-n),"middle"==this.baseline&&(e=-r/2),"bottom"==this.baseline&&(e=-r),[[t,e],[t+n,e],[t+n,e+r],[t,e+r]]}},{key:"_getTextArray",value:function(){return this._textDirty&&(this._textArray=this._text.split("\n"),this._textDirty=!1),this._textArray}},{key:"addLine",value:function(t){this._text+="\n"+t,this._textArray.push(t),this._contentDirty=!0,this._textDirty=!1}},{key:"removeLine",value:function(t){if(!(t<0||t>this._textArray.length-1)){this._textArray.splice(t,1),this._text="";for(var e=0;e<this._textArray.length;e++){var n=this._textArray[e];this._text+=n,e!=this._textArray.length-1&&(this._text+="\n")}this._contentDirty=!0,this._textDirty=!1}}},{key:"canDraw",value:function(){return null!=this._text&&0!=this._text.length&&o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canDraw",this).call(this)}},{key:"_applyCurrentDrawingStates",value:function(t){t.font=this.font,t.fillStyle=this.color,t.textBaseline="top",t.textAlign=this.align,t.strokeStyle=this.borderColor,t.lineWidth=this.borderWidth,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_applyCurrentDrawingStates",this).call(this,t)}},{key:"_drawSelf",value:function(t,e,n){t.save();var r=this._getTextArray(),i=0;if(this.baseLine==l&&(i=0),"middle"==this.baseLine&&(i=-n/2),"bottom"==this.baseLine&&(i=-n),null!=this.maxWidth)for(var o=0;o<r.length;o++){var a=r[o];t.fillText(a,0,i,this.maxWidth),0!=this.borderWidth&&null!=this.borderColor&&t.strokeText(a,0,i,this.maxWidth),i+=this.fontSize*this.lineHeight}else for(var s=0;s<r.length;s++){var u=r[s];t.fillText(u,0,i),0!=this.borderWidth&&null!=this.borderColor&&t.strokeText(u,0,i),i+=this.fontSize*this.lineHeight}t.restore()}},{key:"color",get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t)}},{key:"borderColor",get:function(){return this._borderColor},set:function(t){this._borderColor!=t&&(this._borderColor=t)}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(t){this._borderWidth!=t&&(this._borderWidth=t)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!=t&&(this._fontStyle=t,this._contentDirty=!0)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this._fontFamily!=t&&(this._fontFamily=t,this._contentDirty=!0)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!=t&&(this._fontSize=t,this._contentDirty=!0)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!=t&&(this._fontWeight=t,this._contentDirty=!0)}},{key:"font",get:function(){return this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily}},{key:"width",set:function(t){},get:function(){if(this._contentDirty){if(""==this._text&&null==this._text)return 0;var t=this.getRoot();if(null!=t&&t.ctx){t.ctx.save(),t.ctx.font=this.font;for(var e=this._getTextArray(),n=-1/0,r=0;r<e.length;r++){var i=e[r];n=Math.max(t.ctx.measureText(i).width,n)}this._width=n,t.ctx.restore(),this._contentDirty=!1}}return null!=this.maxWidth?Math.min(this._width,this.maxWidth):this._width}},{key:"height",set:function(t){},get:function(){return this._fontSize*this.lineHeight*this._getTextArray().length}},{key:"text",get:function(){return this._text},set:function(t){this._text!=t&&(this._text=t,this._contentDirty=!0,this._textDirty=!0)}}]),e}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(1)),o=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null==e)throw new Error("Canvas不能为空");var r=e.getContext("2d");if(null==r)throw new Error("很遗憾,当前设备不支持Canvas2d。或者你看看是不是传入的canvas错了？");this._tempCanvas=n.tempCanvas,this.keep=n.keep,this.width=n.canvasWidth||e._width,null==this.width&&(this.width=e.clientWidth),this.height=n.canvasHeight||e._height,null==this.height&&(this.height=e.clientWidth),e.width=o.default.DRP*this.width,e.height=o.default.DRP*this.height,window&&(e.style.width=this.width+"px",e.style.height=this.height+"px"),this.ctx=r,this.ctx.wx_canvas=e,this.canvas=e,this._rafId,this._rafUpdateId,this.renderQueue=[],this.animations=[],this._runningAnimation}return r(t,[{key:"startAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animations[t];return e?(e.render=this,this._runningAnimation=e,e.start()):Promise.reject("没有找到对应动画")}},{key:"pauseAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animations[t];e&&(e.render=this,e.pause())}},{key:"pauseRunningAnimation",value:function(){this._runningAnimation&&this._runningAnimation.isRunning&&this._runningAnimation.pause()}},{key:"cancelAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=this.animations[t];n?(n.render=this,n.cancel(e),this._runningAnimation=null):e&&e()}},{key:"cancelRunningAnimation",value:function(t){this._runningAnimation&&this._runningAnimation.isRunning?(this._runningAnimation.cancel(t),this._runningAnimation=null):t&&t()}},{key:"getRunningAnimationIndex",value:function(){return this._runningAnimation?this.animations.indexOf(this._runningAnimation):-1}},{key:"createRoot",value:function(){return new i.default({anchroX:0,anchroY:0,scaleX:o.default.DRP,scaleY:o.default.DRP,width:this.width,height:this.height})}},{key:"addRenderNode",value:function(t){this.renderQueue.push(t)}},{key:"sort",value:function(){this.renderQueue.sort(function(t,e){return null==t.drawOrder||null==e.drawOrder?0:t.drawOrder-e.drawOrder})}},{key:"drawQueue",value:function(t){this.renderQueue.forEach(function(e){e.draw(t)})}},{key:"createImage",value:function(t){if(null==t)return null;var e=t.src,n=t.onload,r=t.onerror;if(null!=e){var i=this.canvas.createImage();i.onload=function(){n&&n(i)},i.onerror=r,i.src=e}else r&&r("src不能为空")}},{key:"createImageFigure",value:function(t){if(null==t)return null;var e=t.src,n=t.onload,r=t.onerror,i=null==t.width?0:t.width,o=null==t.height?0:t.height,a=this._tempCanvas;this.createImage({src:e,onload:function(e){if(n){var r=new ImageFigure({mode:t.mode,image:e,width:i,height:o,tempCanvas:a});n(r)}},onerror:function(){r&&r("图片加载错误,输入路径为 ："+e)}})}},{key:"draw",value:function(t){null==this.keep&&t.clearRect(0,0,this.width*o.default.DRP,this.height*o.default.DRP),t.lastClipRegion=null,t.save(),this.drawQueue(t),t.restore()}},{key:"startRAF",value:function(t){if(null==this._rafId){this._stopRAF=!1;var e=void 0,n=void 0;t&&(e=t.beforeDraw,n=t.afterDraw);var r=this.canvas,i=this;return function t(){if(e&&e(),i.update(!1),n&&n(),i._stopRAF)return i._stopRAF=!1,void(i._rafId=null);i._rafId=o.default.requestAnimationFrame(r,t)}(),!0}return!1}},{key:"endRAF",value:function(){null!=this._rafId&&(o.default.cancelAnimationFrame(this.canvas,this._rafId),this._rafId=null,this._stopRAF=!0)}},{key:"update",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments[1];if(t){var n=this.ctx,r=this;this._rafUpdateId&&o.default.cancelAnimationFrame(this.canvas,this._rafUpdateId),this._rafUpdateId=o.default.requestAnimationFrame(this.canvas,function(){r.draw(n),r._rafUpdateId=null,e&&e()})}else this.draw(this.ctx)}},{key:"rAFisRunning",get:function(){return null!=this._rafId}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=b(n(21)),o=b(n(0)),a=b(n(2)),s=b(n(8)),u=b(n(22)),l=b(n(29)),h=b(n(4)),c=b(n(10)),f=b(n(23)),y=b(n(24)),p=b(n(25)),d=b(n(9)),_=b(n(26)),v=b(n(27)),g=b(n(28));function b(t){return t&&t.__esModule?t:{default:t}}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"readJSONObject",value:function(t){var e=this,n=[];return t.artboards.forEach(function(t){if("artboard"==t.type){var r=new Array(t.nodes.length),a=new i.default({x:t.translation[0],y:t.translation[1],width:t.width,height:t.height,color:o.default.converColorArray(t.color),opacity:t.opacity}),s=e.readNodes(t,a,r);e.initClips(a,r),n.push({render:s,artboard:a,animations:e.readAnimations(t,r)})}}),n}},{key:"read",value:function(t){var e=JSON.parse(t);return this.readJSONObject(e)}},{key:"initClips",value:function(t,e){var n=this;if(t.clips)for(var r=0;r<t.clips.length;r++){var i=t.clips[r].node;t.clips[r].shape=e[i],delete t.clips[r].node}t.children.forEach(function(t){n.initClips(t,e)})}},{key:"getPropertyName",value:function(t){return"posX"==t?"x":"posY"==t?"y":"strokeStart"==t?"start":"strokeEnd"==t?"end":"strokeWidth"==t?"width":"strokeOffset"==t?"offset":t}},{key:"readKeyed",value:function(t,e,n){var r=this;t.forEach(function(t){var i=void 0;for(var o in t)if("component"==o)i=n[t[o]];else if(i){var a=r.getPropertyName(o);a&&a in i&&function(){var n=t[o],r=new l.default({figure:i,property:a});n.forEach(function(t){t.forEach(function(t){t.time*=1e3,0==e.duration?t.time=0:t.time=t.time/e.duration,r.addKeyFrame(t)})}),e.addKeyedAnimation(r)}()}})}},{key:"readAnimations",value:function(t,e){var n=this,r=t.animations,i=[];return r.forEach(function(t){var r=new u.default(t);r.duration*=1e3,n.readKeyed(t.keyed,r,e),i.push(r)}),i}},{key:"readPathPoints",value:function(t,e){e.forEach(function(e){t.addPoint(new c.default({type:e.pointType,x:e.translation[0],y:e.translation[1],in:e.in,out:e.out}))})}},{key:"readNodes",value:function(t,e,n){for(var r=t.nodes,i=[],u=0;u<r.length;u++){var l=r[u];if("node"==l.type){var c=new f.default({drawOrder:l.drawOrder,x:l.translation[0],y:l.translation[1],id:u,name:l.name,rotate:l.ratation,scaleX:l.scale[0],scaleY:l.scale[1],opacity:l.opacity,clips:l.clips}),b=e;null!=l.parent&&(b=n[l.parent]),b.addChild(c),n[u]=c}if("shape"==l.type){var w=new a.default({drawOrder:l.drawOrder,x:l.translation[0],y:l.translation[1],id:u,rotation:l.rotation,name:l.name,scaleX:l.scale[0],scaleY:l.scale[1],opacity:l.opacity,visible:l.isVisible,clips:l.clips}),m=e;null!=l.parent&&(m=n[l.parent]),i.push(w),m.addChild(w),n[u]=w}if("ellipse"==l.type){var O=n[l.parent],P=new s.default({drawOrder:l.drawOrder,x:l.translation[0],y:l.translation[1],width:l.width,height:l.height,id:u,name:l.name,rotation:l.ratation,scaleX:l.scale[0],scaleY:l.scale[1],opacity:l.opacity});n[u]=P,O.addPath(P)}if("rectangle"==l.type){var k=n[l.parent],x=new d.default({drawOrder:l.drawOrder,x:l.translation[0],y:l.translation[1],width:l.width,height:l.height,id:u,name:l.name,rotate:l.ratation,scaleX:l.scale[0],scaleY:l.scale[1],opacity:l.opacity,radius:l.cornerRadius});n[u]=x,k.addPath(x)}if("star"==l.type){var j=n[l.parent],S=new g.default({drawOrder:l.drawOrder,x:l.translation[0],y:l.translation[1],width:l.width,height:l.height,id:u,name:l.name,rotate:l.ratation,scaleX:l.scale[0],scaleY:l.scale[1],opacity:l.opacity,innerRadius:l.innerRadius,starPoints:l.points});n[u]=S,j.addPath(S)}if("path"==l.type){var D=n[l.parent],C=new h.default({x:l.translation[0],y:l.translation[1],width:l.width,height:l.height,id:u,name:l.name,rotate:l.ratation,scaleX:l.scale[0],scaleY:l.scale[1],opacity:l.opacity,isClose:l.isClosed});this.readPathPoints(C,l.points),n[u]=C,D.addPath(C)}if("colorStroke"==l.type){var M=n[l.parent],T=new _.default({cap:l.cap,join:l.join,width:l.width,opacity:l.opacity,start:l.start,end:l.end,offset:l.offset,color:o.default.converColorArray(l.color),name:l.name,id:u});n[u]=T,M.addStrokeStyle(T)}if("colorFill"==l.type){var A=n[l.parent],E=new v.default({opacity:l.opacity,color:o.default.converColorArray(l.color),name:l.name,id:u,fillRule:l.fillRule});n[u]=E,A.addFillStyle(E)}if("gradientFill"==l.type){var R=n[l.parent],F=[l.start[0],l.start[1],l.end[0],l.end[1]];F=F.concat(l.colorStops);var K=new p.default(F),W=new v.default({gradientColor:K,opacity:l.opacity,name:l.name,id:u,fillRule:l.fillRule});n[u]=W,R.addFillStyle(W)}if("radialGradientFill"==l.type){var X=n[l.parent],I=[l.secondaryRadiusScale,l.start[0],l.start[1],l.end[0],l.end[1]];I=I.concat(l.colorStops);var Y=new y.default(I),z=new v.default({gradientColor:Y,opacity:l.opacity,name:l.name,fillRule:l.fillRule,id:u});n[u]=z,X.addFillStyle(z)}}return i}}]),t}();e.default=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(1)),o=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.color=new o.default(t.color),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"applyDrawingStates",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyDrawingStates",this).call(this,t),t.fillStyle=this.color.color}},{key:"drawSelf",value:function(t,e,n){t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fill()}}]),e}();e.default=s},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return r});class r{constructor(t={}){this.duration=t.duration,null==this.duration&&(this.duration=0),this.fps=t.fps,null==this.fps&&(this.fps=60),this.isLooping=t.isLooping,null==this.isLooping&&(this.isLooping=!1),this.name=t.name,this.keyed=[],this._running=!1,this.render=t.render,this.refreshCount=0}addKeyedAnimation(t){this.keyed.push(t)}get isRunning(){return this._running}applyAnimationState(t){this.keyed.forEach(e=>{e.applyCurrent(t)})}start(){let t=this.render;if(!t)return;if(this._running)return Promise.reject("已经开始运行了");let e=this.duration*this.fps/1e3,n=this;return new Promise((r,i)=>{t.startRAF({beforeDraw(){if(n.refreshCount>e){if(!n.isLooping)return void n.cancel(r);n.refreshCount=0}let t=n.refreshCount/e;n.applyAnimationState(t)},afterDraw(){n.refreshCount++}})&&(this._running=!0)})}cancel(t){this.render.endRAF(),this._running=!1,this.refreshCount=0,t&&t()}pause(){let t=this.refreshCount;this.cancel(),this.refreshCount=t}_resetKeyedFrames(){this.keyed.forEach(t=>{t.reset()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(6),o=(r=i)&&r.__esModule?r:{default:r};var a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorX:0,anchorY:0};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(11),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_createGradient",value:function(t){var e=this.values[1]-this.values[3],n=this.values[2]-this.values[4];return t.createRadialGradient(this.values[1],this.values[2],0,this.values[1],this.values[2],Math.sqrt(e*e+n*n))}},{key:"colorStopValuesOffset",get:function(){return 5}},{key:"coordOffset",get:function(){return 1}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(11),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_createGradient",value:function(t){return t.createLinearGradient(this.values[0],this.values[1],this.values[2],this.values[3])}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=n(12),s=(r=a)&&r.__esModule?r:{default:r};var u=["bevel","round","miter"],l=["butt","round","square"],h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.trim=t.trim,null==n.trim&&(n.trim=0),n.end=t.end,null==n.end&&(n.end=1),n.start=t.start,null==n.start&&(n.start=0),n.offset=t.offset,null==n.offset&&(n.offset=0),n.join=t.join,null==n.join&&(n.join=0),n.cap=t.cap,null==n.cap&&(n.cap=0),n.width=t.width,null==n.width&&(n.width=0),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"canDraw",value:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canDraw",this).call(this)&&this.end-this.start!=0}},{key:"_applyStyle",value:function(t,n){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_applyStyle",this).call(this,t),null!=this.color?t.strokeStyle=this.strokeColor.color:null!=this.gradientColor&&(t.strokeStyle=this.gradientColor.getGradient(t)),t.lineWidth=this.width,t.lineJoin=u[this.join],t.lineCap=l[this.cap],0==this.offset&&0==this.start&&1==this.end);else if(this.end-this.start<1){var r=(this.end-this.start)*n;t.lineDashOffset=-(this.offset+this.start)*n,t.setLineDash([r,n-r])}}},{key:"_paintStyle",value:function(t,e){e?t.stroke(e):t.stroke()}},{key:"paint",value:function(t,e,n){this.canDraw()&&(t.save(),this._applyStyle(t,n),this._paintStyle(t,e),t.restore())}},{key:"strokeColor",get:function(){return this.color},set:function(t){this.color=t}}]),e}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(12),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.fillRule=t.fillRule,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_applyStyle",value:function(t){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_applyStyle",this).call(this,t),null!=this.fillColor?t.fillStyle=this.fillColor.color:null!=this.gradientColor&&(t.fillStyle=this.gradientColor.getGradient(t))}},{key:"_paintStyle",value:function(t,e){e?t.fill(e):t.fill()}},{key:"fillColor",get:function(){return this.color},set:function(t){this.color=t}},{key:"fillRadial",get:function(){return this.fillGradient},set:function(t){this.fillGradient=t}},{key:"fillGradient",get:function(){return this.gradientColor.values},set:function(t){null!=this.gradientColor&&(this.gradientColor.values=t)}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(4)),o=a(n(10));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._innerRadius=t.innerRadius,null==n._innerRadius&&(n._innerRadius=.5),n._starPoints=t.starPoints,null==n._starPoints?n._starPoints=5:n._starPoints=Math.floor(n._starPoints),n._isClose=!0,n._points=new Array(2*n._starPoints),n._outlinecreated=!1,n._inlinecreated=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"_createStarPoints",value:function(){for(var t=this._starPoints,e=2*Math.PI/t,n=-Math.PI/2,r=n+e/2,i=this.width/2,a=i*this.innerRadius,s=this.height/2,u=s*this.innerRadius,l=0,h=0,c=0;l<t;l++){if(!this._outlinecreated){var f=h+n,y=Math.cos(f)*i,p=Math.sin(f)*s;this._points[c+0]=new o.default({x:y,y:p,type:0})}if(!this._inlinecreated){var d=h+r,_=Math.cos(d)*a,v=Math.sin(d)*u;this._points[c+1]=new o.default({x:_,y:v,type:0})}h+=e,c+=2}this._outlinecreated=!0,this._inlinecreated=!0}},{key:"createPath",value:function(t,n,r){this._createStarPoints(),function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createPath",this).call(this,t,n,r)}},{key:"isClose",get:function(){return!0}},{key:"innerRadius",get:function(){return this._innerRadius},set:function(t){this._innerRadius!=t&&(this._innerRadius=t,this._inlinecreated=!1,this.fireDirty())}},{key:"starPoints",get:function(){return this._starPoints},set:function(t){var e=Math.floor(t);this._starPoints!=e&&(this._starPoints=e,this._outlinecreated=!1,this._inlinecreated=!1,this._points=new Array(2*e),this.fireDirty())}}]),e}();e.default=s},function(t,e,n){"use strict";n.r(e);const r=4,i=.001,o=1e-7,a=10,s=11,u=1/(s-1),l="function"==typeof Float32Array;class h{constructor(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(this.mY1=e,this.mY2=r,this.mX1=t,this.mX2=n,this.linearEasing=!1,t===e&&n===r)this.linearEasing=!0;else{this.sampleValues=l?new Float32Array(s):new Array(s);for(var i=0;i<s;++i)this.sampleValues[i]=this.calcBezier(i*u,t,n)}}easing(t){return 0===t||1===t?t:this.linearEasing?t:this.calcBezier(this.getTForX(t,this.mX1,this.mX2),this.mY1,this.mY2)}getTForX(t,e,n){let r=0,o=1,a=s-1,l=this.sampleValues;for(;o!==a&&l[o]<=t;++o)r+=u;let h=r+(t-l[--o])/(l[o+1]-l[o])*u,c=this.getSlope(h,e,n);return c>=i?this.newtonRaphsonIterate(t,h,e,n):0===c?h:this.binarySubdivide(t,r,r+u,e,n)}A(t,e){return 1-3*e+3*t}B(t,e){return 3*e-6*t}C(t){return 3*t}calcBezier(t,e,n){return((this.A(e,n)*t+this.B(e,n))*t+this.C(e))*t}getSlope(t,e,n){return 3*this.A(e,n)*t*t+2*this.B(e,n)*t+this.C(e)}binarySubdivide(t,e,n,r,i){let s,u,l=0;do{u=e+(n-e)/2,(s=this.calcBezier(u,r,i)-t)>0?n=u:e=u}while(Math.abs(s)>o&&++l<a);return u}newtonRaphsonIterate(t,e,n,i){for(let o=0;o<r;++o){let r=this.getSlope(e,n,i);if(0===r)return e;e-=(this.calcBezier(e,n,i)-t)/r}return e}}n.d(e,"default",function(){return c});class c{constructor(t={}){this.figure=t.figure,this.property=t.property,this.keyStack=[],this.currentKey,this.nextKey}get startKeyFrame(){return this.keyStack[0]}get lastKeyFrame(){return this.keyStack[this.keyStack.length-1]}addKeyFrame(t={}){let e=this.keyStack[this.keyStack.length-1];if(e&&e.time>t.time)throw"属性关键帧的后续时间不能大于前一个";let n={id:this.keyStack.length,time:t.time,value:t.value,timingFunctionType:t.interpolatorType};2==n.timingFunctionType&&(n.bezierEasing=new h(t.cubicX1,t.cubicY1,t.cubicX2,t.cubicY2)),this.keyStack.push(n)}applyCurrent(t){let e=this.startKeyFrame,n=this.lastKeyFrame;if(t<=e.time)this.figure[this.property]=e.value;else if(t>=n.time)this.figure[this.property]=n.value;else{if(null==this.currentKey&&null==this.nextKey)for(let e=0;e<this.keyStack.length-1;e++){let n=this.keyStack[e],r=this.keyStack[e+1];if(t>=n.time&&t<=r.time){this.nextKey=r,this.currentKey=n;break}}if(!(t>=this.currentKey.time&&t<=this.nextKey.time))return t>this.nextKey.time?(this.currentKey=this.nextKey,this.nextKey=this.keyStack[this.currentKey.id+1],void this.applyCurrent(t)):void(t<this.currentKey.time&&(this.nextKey=this.currentKey,this.currentKey=this.keyStack[this.currentKey.id-1],this.applyCurrent(t)));this.figure[this.property]=this._getCurrentValue(t)}}reset(){this.currentKey=null,this.nextKey=null}_getCurrentValue(t){if(0==this.currentKey.timingFunctionType)return this.figure[this.property];if(1==this.currentKey.timingFunctionType){let e=t-this.currentKey.time;if(this.currentKey.value instanceof Array){let t=new Array(this.currentKey.value.length);for(let n=0;n<t.length;n++){let r=this.currentKey.deltas;null==r&&(r=new Array(t.length),this.currentKey.deltas=r),r[n]=(this.nextKey.value[n]-this.currentKey.value[n])/(this.nextKey.time-this.currentKey.time),t[n]=this.currentKey.value[n]+e*r[n]}return t}{let t=this.currentKey.delta;return null==t&&(t=(this.nextKey.value-this.currentKey.value)/(this.nextKey.time-this.currentKey.time),this.currentKey.delta=t),this.currentKey.value+e*t}}if(2==this.currentKey.timingFunctionType){let e=this.currentKey.bezierEasing;if(e){let n=(t-this.currentKey.time)/(this.nextKey.time-this.currentKey.time),r=e.easing(n);if(this.currentKey.value instanceof Array){let t=new Array(this.currentKey.value.length);for(let e=0;e<t.length;e++)t[e]=this.currentKey.value[e]+r*(this.nextKey.value[e]-this.currentKey.value[e]);return t}return this.currentKey.value+r*(this.nextKey.value-this.currentKey.value)}}return this.figure[this.property]}}}]).default});